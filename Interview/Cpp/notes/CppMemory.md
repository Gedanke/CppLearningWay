# C++ 内存管理

此处是 C++ 内存管理面试题，内容如下

---

## 类对象的存储空间

* 空类的大小为 1 字节，当作为基类时，大小为 0
* 一个类中，虚函数本身、成员函数(包括静态与非静态)和静态数据成员都是不占用类对象的存储空间，即非静态成员的数据类型大小之和
* 对于包含虚函数的类，不管有多少个虚函数，只有一个虚指针，`vptr` 的大小
* 普通继承，派生类继承了所有基类的函数与成员，要按照字节对齐来计算大小
* 虚函数继承，不管是单继承还是多继承，都是继承了基类的 `vptr`(32 位操作系统 4 字节，64 位操作系统 8 字节)
* 虚继承，继承基类的 `vptr`
* 考虑程序中为了边缘对齐优化加入 padding

---

## C++ 内存分区

C++ 中的内存分区，分别是堆、栈、自由存储区、全局/静态存储区、常量存储区和代码区。如下图所示

![](./1.png)





---
